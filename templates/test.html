<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
</head>
<body>
<!-- ูุณุฎู ููุงููฺฏโุดุฏู ุจุง ูุงูุจ Sneat/Bootstrap RTL Admin -->
<div class="container-xxl flex-grow-1 container-p-y">

  <!-- ูุดุฏุงุฑูุง ููุฑ -->
  <div class="alert alert-danger d-flex align-items-center" role="alert">
    <i class="bx bx-error-circle me-2 fs-4"></i>
    <div>
      <strong class="me-2">ูุดุฏุงุฑูุง ููุฑ:</strong>
      <ul class="mb-0 ps-3">
        <li>๐จ ุงูุฒุงุด HR ุฏุฑ Holter ูุณุจุช ุจู ูุฑุงุฌุนู ูุจู</li>
        <li>โ๏ธ ฺฉุงูุด EF ุจู 28ูช โ ุจุฑุฑุณ ูุฌุฏุฏ ุชูุตู ูโุดูุฏ</li>
        <li>๐งฌ ุดูฺฉ ูฺฉุฑุฑ + AF ุจุงูุง โ arrhythmic storm ุงุญุชูุงู</li>
      </ul>
    </div>
  </div>

  <!-- ูุดุฎุตุงุช ุจูุงุฑ -->
  <div class="card mb-4">
    <div class="card-header bg-info text-white">ูุดุฎุตุงุช ุจูุงุฑ</div>
    <div class="card-body">
      <div class="row g-3">
        <div class="col-md-3"><label class="form-label">ูุงู ู ูุงู ุฎุงููุงุฏฺฏ</label><input type="text" class="form-control" value="ุนู ูุญูุฏ" readonly></div>
        <div class="col-md-3"><label class="form-label">ฺฉุฏ ูู</label><input type="text" class="form-control" value="0012345678" readonly></div>
        <div class="col-md-3"><label class="form-label">ุดูุงุฑู ูพุฑููุฏู</label><input type="text" class="form-control" value="PY-1403-001" readonly></div>
        <div class="col-md-3"><label class="form-label">ุณู</label><input type="text" class="form-control" value="66 ุณุงู" readonly></div>
      </div>
    </div>
  </div>

  <!-- ุจูุงุฑ ูุง ุฒููู ุง -->
  <div class="card mb-4">
    <div class="card-header bg-secondary text-white">ุณุงุจูู ุจูุงุฑโูุง ูุฒูู</div>
    <div class="card-body">
      <ul class="mb-0 ps-4">
        <li>ูุดุงุฑ ุฎูู ุจุงูุง: <strong class="text-danger">ุฏุงุฑุฏ</strong></li>
        <li>ุฏุงุจุช ููุน ฒ: <strong class="text-danger">ุฏุงุฑุฏ</strong></li>
        <li>ุณุงุจูู ุณฺฉุชู ููุจ: <strong class="text-danger">ุฏุงุฑุฏ</strong></li>
        <li>ูุงุฑุณุง ฺฉูู: <strong class="text-success">ูุฏุงุฑุฏ</strong></li>
      </ul>
    </div>
  </div>

  <!-- ุฌุฏูู ุชุณุชโูุง -->
  <div class="card mb-4">
    <div class="card-header bg-primary text-white">ุฎูุงุตู ุชุณุชโูุง ู ุจุฑุฑุณโูุง</div>
    <div class="card-body table-responsive">
      <table class="table table-bordered text-center">
        <thead class="table-light">
          <tr>
            <th>ูุงู ุชุณุช</th>
            <th>ูุถุนุช</th>
            <th>ุชูุณุฑ</th>
            <th>ููุงุด</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>ูููุชุฑ ูุดุงุฑ</td>
            <td><span class="badge bg-success">ุงูุฌุงู ุดุฏู</span></td>
            <td>ููุณุงู ุจุงูุง</td>
            <td><button class="btn btn-sm btn-outline-info" onclick="showGraph('bp')">ฺฏุฑุงู</button></td>
          </tr>
          <tr>
            <td>ูููุชุฑ ุฑุชู</td>
            <td><span class="badge bg-success">ุงูุฌุงู ุดุฏู</span></td>
            <td>PAC ูฺฉุฑุฑ + AF</td>
            <td><button class="btn btn-sm btn-outline-info" onclick="showGraph('hr')">ฺฏุฑุงู</button></td>
          </tr>
          <tr>
            <td>ุงฺฉู</td>
            <td><span class="badge bg-success">ุงูุฌุงู ุดุฏู</span></td>
            <td>EF = 28ูช</td>
            <td><button class="btn btn-sm btn-outline-info" onclick="showGraph('ef')">ฺฏุฑุงู</button></td>
          </tr>
          <tr>
            <td>ุชุณุช ูุฑุฒุด</td>
            <td><span class="badge bg-danger">ูุงุฒ ูุณุช</span></td>
            <td>-</td>
            <td>-</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- ุงุฏุงูู: ฺฏุฑุงูโูุงุ ูุฑู ุชุตูู ูพุฒุดฺฉุ ุชุงูโูุงู ุจุงููุ ุงุณฺฉุฑูพุชโูุง ุฏุฑ ุจุฎุด ุจุนุฏ -->

</div>

<!-- ฺฏุฑุงูโูุง ุชุญูู -->
<div class="card mb-4">
  <div class="card-header bg-dark text-white">ฺฏุฑุงูโูุง ุชุญูู</div>
  <div class="card-body">
    <div class="row g-4">
      <div class="col-md-6">
        <canvas id="chart_ef" height="200"></canvas>
      </div>
      <div class="col-md-6">
        <canvas id="chart_bp" height="200"></canvas>
      </div>
      <div class="col-md-6">
        <canvas id="chart_hr" height="200"></canvas>
      </div>
      <div class="col-md-6">
        <canvas id="chart_af" height="200"></canvas>
      </div>
    </div>
  </div>
</div>

<!-- ุชุตูู ูพุฒุดฺฉ -->
<div class="card mb-4">
  <div class="card-header bg-success text-white">ุซุจุช ุชุตูู ูพุฒุดฺฉ ุฌุฑุงุญ</div>
  <div class="card-body">
    <form class="row g-3">
      <h6 class="text-primary">ฑ. ุฏุงุฑููุง ุชุฌูุฒ</h6>
      <div class="col-md-4"><label class="form-label">ูุงู ุฏุงุฑู</label><input name="med_name" class="form-control"></div>
      <div class="col-md-2"><label class="form-label">ุฏูุฒ ุฏุงุฑู (mg)</label><input name="med_dose" type="number" class="form-control"></div>
      <div class="col-md-2"><label class="form-label">ุชุนุฏุงุฏ ุฏุฑ ุฑูุฒ</label><input name="med_freq" type="number" class="form-control"></div>
      <div class="col-md-2"><label class="form-label">ูุฌููุน ุฑูุฒ</label><input name="med_days" type="number" class="form-control"></div>
      <div class="col-md-2"><label class="form-label">ูุฌููุน ฺฉู</label><input name="med_total" class="form-control" readonly></div>

      <h6 class="mt-4 text-primary">ฒ. ูุฏุงุฎูู ุฌุฑุงุญ</h6>
      <div class="col-md-4">
        <label class="form-label">ูุงุฒ ุจู ุจุงุชุฑ ุฌุฏุฏุ</label>
        <select class="form-select" name="needs_battery">
          <option>ุจูู</option><option>ุฎุฑ</option>
        </select>
      </div>
      <div class="col-md-4">
        <label class="form-label">ููุน ุฌุฑุงุญ ูพุดููุงุฏ</label>
        <select class="form-select" name="surgery_type">
          <option>ุชุนูุถ ุจุงุชุฑ</option><option>ุชุนูุถ ูุฏ</option><option>ุจุฑุฑุณ ูุจู ุงุฒ ุฌุฑุงุญ</option>
        </select>
      </div>
      <div class="col-md-4">
        <label class="form-label">ุฒูุงู ูพุดููุงุฏ</label>
        <input type="date" name="surgery_date" class="form-control">
      </div>

      <h6 class="mt-4 text-primary">ณ. ุงุฑุฌุงุน ู ูพฺฏุฑ</h6>
      <div class="col-md-4">
        <label class="form-label">ุงุฑุฌุงุน ุจู</label>
        <select class="form-select" name="referral">
          <option>ููุฑูููฺ</option><option>ุฑุชููููฺ</option><option>ุฌุฑุงุญ ูุฌุฏุฏ</option>
        </select>
      </div>
      <div class="col-md-4">
        <label class="form-label">ุฒูุงู ุจุฑุฑุณ ุจุนุฏ</label>
        <input type="date" name="next_check" class="form-control">
      </div>
      <div class="col-md-12">
        <label class="form-label">ุงุฏุฏุงุดุช ููุง ูพุฒุดฺฉ</label>
        <textarea name="doctor_notes" class="form-control" rows="3"></textarea>
      </div>
    </form>
  </div>
</div>

<!-- ุชุงูโูุงู ุจุงูู -->
<div class="card mb-4">
  <div class="card-header bg-warning text-dark">ุชุงูโูุงู ุจุงูู ุจูุงุฑ</div>
  <div class="card-body">
    <ul class="timeline list-unstyled">
      <li class="mb-3 d-flex align-items-start">
        <div class="me-3 fs-4 text-success">๐</div>
        <div>
          <strong>ฑดฐณ/ฐฒ/ฒถ โ ูุณุฎู ุฏุงุฑู</strong><br>
          <small>ูพุฒุดฺฉ: ุฏฺฉุชุฑ ูุณู</small>
          <ul class="mb-1"><li>ุจุชุงุจููฺฉุฑ ฒ.ต โ ุฑูุฒ ฑ</li><li>ุขููุฏุงุฑูู ฒฐฐ โ ุฑูุฒ ูุตู</li></ul>
          <a href="#" class="text-primary">ูุดุงูุฏู ฺฉุงูู ูุณุฎู</a>
        </div>
      </li>

      <li class="mb-3 d-flex align-items-start">
        <div class="me-3 fs-4 text-info">๐</div>
        <div>
          <strong>ฑดฐณ/ฐฒ/ฒต โ ูุชุฌู Holter</strong><br>
          AF burden: ฑธูช | ุดูฺฉ: ฒ ููุฑุฏ<br>
          <a href="#" class="text-primary">ูุดุงูุฏู PDF ุชุณุช</a>
        </div>
      </li>

      <li class="mb-3 d-flex align-items-start">
        <div class="me-3 fs-4 text-danger">โ๏ธ</div>
        <div>
          <strong>ฑดฐณ/ฐฒ/ฒต โ ูุดุฏุงุฑ ุณุณุชู</strong><br>
          ุงูุช ูุงฺฏูุงู EF ุงุฒ ณตูช โ ฒธูช + AF ุฏุฑ ุญุงู ุงูุฒุงุด
        </div>
      </li>

      <li class="mb-3 d-flex align-items-start">
        <div class="me-3 fs-4 text-primary">๐ฉบ</div>
        <div>
          <strong>ฑดฐณ/ฐฒ/ฒฒ โ ูุนุงูู ุญุถูุฑ</strong><br>
          ูพุดููุงุฏ CRT ุฏุงุฏู ุดุฏ | EF ุจุฑุฑุณ ุดูุฏ ูุงู ุจุนุฏ<br>
          <a href="#" class="text-primary">ูุดุงูุฏู ุงุฏุฏุงุดุช ูพุฒุดฺฉ</a>
        </div>
      </li>
    </ul>
  </div>
</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  const chartData = {
    ef: {
      id: 'chart_ef',
      label: 'EF Trend (%)',
      data: [40, 35, 30, 28],
      labels: ['1402/10', '1402/11', '1402/12', '1403/01'],
      color: 'red'
    },
    bp: {
      id: 'chart_bp',
      label: 'SBP (mmHg)',
      data: [130, 140, 150, 155],
      labels: ['ุตุจุญ', 'ุธูุฑ', 'ุนุตุฑ', 'ุดุจ'],
      color: 'orange'
    },
    hr: {
      id: 'chart_hr',
      label: 'HR (bpm)',
      data: [70, 85, 90, 105],
      labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4'],
      color: 'blue'
    },
    af: {
      id: 'chart_af',
      label: 'AF Burden (%)',
      data: [5, 9, 14, 18],
      labels: ['1402/11', '1402/12', '1403/01', '1403/02'],
      color: 'purple'
    }
  };

  Object.values(chartData).forEach(cfg => {
    const ctx = document.getElementById(cfg.id).getContext('2d');
    new Chart(ctx, {
      type: 'line',
      data: {
        labels: cfg.labels,
        datasets: [{
          label: cfg.label,
          data: cfg.data,
          borderColor: cfg.color,
          backgroundColor: cfg.color + '33',
          fill: true,
          tension: 0.3
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false }
        },
        scales: {
          y: {
            beginAtZero: false
          }
        }
      }
    });
  });

  function showGraph(type) {
    document.getElementById(`chart_${type}`).scrollIntoView({ behavior: "smooth" });
  }
</script>

<!-- ูุญุงุณุจู ูุฌููุน ุฏุงุฑู -->
<script>
  const doseFields = ["med_dose", "med_freq", "med_days"];
  doseFields.forEach(name => {
    const el = document.querySelector(`[name="${name}"]`);
    if (el) el.addEventListener("input", calculateTotalDose);
  });

  function calculateTotalDose() {
    const dose = parseFloat(document.querySelector('[name="med_dose"]').value) || 0;
    const freq = parseFloat(document.querySelector('[name="med_freq"]').value) || 0;
    const days = parseFloat(document.querySelector('[name="med_days"]').value) || 0;
    const total = dose * freq * days;
    document.querySelector('[name="med_total"]').value = total ? `${total} mg` : '';
  }
</script>

<!-- ูุดุฏุงุฑูุง ููุดููุฏ ุจุงูู -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const ef = 28;
    const qrs = 135;
    const af = 18;
    const shocks = 3;
    const age = 75;
    const anticoagulant = true;

    let alerts = [];

    if (ef < 35 && qrs > 120) alerts.push("ูพุดููุงุฏ CRT โ EF ูพุงู ู QRS ุจุงูุง.");
    if (shocks >= 3 && af > 15) alerts.push("ูุดุฏุงุฑ storm ุขุฑุชู โ ุดูฺฉ ู AF ุจุงูุง.");
    if (age > 70 && anticoagulant) alerts.push("ูุดุฏุงุฑ ุฎููโุฑุฒ ุงุญุชูุงู โ ุณู ุจุงูุง ู ุฏุงุฑู ุถุฏุงูุนูุงุฏ.");

    if (alerts.length) {
      const box = document.querySelector('.alert-danger ul');
      alerts.forEach(msg => {
        const li = document.createElement("li");
        li.textContent = msg;
        box.appendChild(li);
      });
    }
  });
</script>
</body>
</html>