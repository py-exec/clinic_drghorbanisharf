{% extends "base.html" %}
{% load static %}

{% block title %}Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ø§Ù„Ø§{% endblock %}

{% block content %}
<h2 class="text-center mb-4">Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ø§Ù„Ø§: {{ item.name }}</h2>

<div class="card mb-4">
  <!-- Ù‡Ø¯Ø± Ú©Ø§Ø±Øª -->
  <div class="card-header d-flex justify-content-between align-items-center">
    <h5 class="mb-0">Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ù„Ø§</h5>
    <button onclick="window.print()" class="btn btn-outline-primary btn-sm d-print-none">
      ğŸ–¨ Ú†Ø§Ù¾
    </button>
  </div>

  <!-- Ø¨Ø¯Ù†Ù‡ Ú©Ø§Ø±Øª -->
  <div class="card-body">
    <div class="row g-3">
      <div class="col-md-6"><strong>Ù†Ø§Ù… Ú©Ø§Ù„Ø§:</strong> {{ item.name }}</div>
      <div class="col-md-6"><strong>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ:</strong> {{ item.get_category_display }}</div>
      <div class="col-md-6"><strong>ÙˆØ¶Ø¹ÛŒØª:</strong> {{ item.get_status_display }}</div>
      <div class="col-md-6"><strong>ÙˆØ§Ø­Ø¯ Ø´Ù…Ø§Ø±Ø´:</strong> {{ item.unit }}</div>
      <div class="col-md-6"><strong>Ø¨Ø±Ù†Ø¯:</strong> {{ item.brand }}</div>
      <div class="col-md-6"><strong>Ù…Ø¯Ù„:</strong> {{ item.model }}</div>
      <div class="col-md-6"><strong>Ø³Ø±ÛŒØ§Ù„:</strong> {{ item.serial_number }}</div>
      <div class="col-md-6"><strong>Ø¨Ø§Ø±Ú©Ø¯:</strong> {{ item.barcode }}</div>
      <div class="col-md-6"><strong>Ø³Ø§Ø²Ù†Ø¯Ù‡:</strong> {{ item.manufacturer }}</div>
      <div class="col-md-6"><strong>ØªØ§Ø±ÛŒØ® Ø®Ø±ÛŒØ¯:</strong> {{ item.purchase_date|date:"Y-m-d" }}</div>
      <div class="col-md-6"><strong>Ú¯Ø§Ø±Ø§Ù†ØªÛŒ Ø§Ø²:</strong> {{ item.warranty_start|date:"Y-m-d" }}</div>
      <div class="col-md-6"><strong>ØªØ§:</strong> {{ item.warranty_expiry|date:"Y-m-d" }}</div>
      <div class="col-md-6"><strong>ØªØ£Ù…ÛŒÙ†â€ŒÚ©Ù†Ù†Ø¯Ù‡:</strong> {{ item.supplier }}</div>
      <div class="col-md-6"><strong>Ø´Ø±Ú©Øª Ú¯Ø§Ø±Ø§Ù†ØªÛŒ:</strong> {{ item.warranty_provider }}</div>
      <div class="col-md-6"><strong>Ù…Ø­Ù„ ÙØ¹Ù„ÛŒ:</strong> {{ item.current_location }}</div>
      <div class="col-md-6"><strong>Ù…ØµØ±ÙÛŒØŸ</strong> {{ item.is_consumable|yesno:"Ø¨Ù„Ù‡,Ø®ÛŒØ±" }}</div>
      <div class="col-md-6"><strong>Ù‚Ø§Ø¨Ù„ Ø§Ù…Ø§Ù†ØªØŸ</strong> {{ item.is_loanable|yesno:"Ø¨Ù„Ù‡,Ø®ÛŒØ±" }}</div>
    </div>

    {% if item.description %}
    <hr>
    <p><strong>ØªÙˆØ¶ÛŒØ­Ø§Øª:</strong><br>{{ item.description }}</p>
    {% endif %}
  </div>
</div>

<!-- Ø³ÙˆØ§Ø¨Ù‚ ÙˆØ±ÙˆØ¯ -->
<div class="card mb-4">
  <div class="card-header"><h5 class="mb-0">Ûµ ÙˆØ±ÙˆØ¯ Ø§Ø®ÛŒØ±</h5></div>
  <div class="card-body p-0">
    <table class="table table-sm table-striped mb-0">
      <thead><tr><th>ØªØ§Ø±ÛŒØ®</th><th>ØªØ¹Ø¯Ø§Ø¯</th><th>Ø³Ø±ÛŒ Ø³Ø§Ø®Øª</th><th>Ø§Ù†Ù‚Ø¶Ø§</th></tr></thead>
      <tbody>
        {% for entry in stockins %}
        <tr>
          <td>{{ entry.stock_in.date|date:"Y-m-d" }}</td>
          <td>{{ entry.quantity }}</td>
          <td>{{ entry.batch_number }}</td>
          <td>{{ entry.expiration_date|default:"-" }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="4" class="text-center text-muted">ÙˆØ±ÙˆØ¯ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- Ø³ÙˆØ§Ø¨Ù‚ Ø®Ø±ÙˆØ¬ -->
<div class="card mb-4">
  <div class="card-header"><h5 class="mb-0">Ûµ Ø®Ø±ÙˆØ¬ Ø§Ø®ÛŒØ±</h5></div>
  <div class="card-body p-0">
    <table class="table table-sm table-striped mb-0">
      <thead><tr><th>ØªØ§Ø±ÛŒØ®</th><th>ØªØ¹Ø¯Ø§Ø¯</th><th>ÙˆØ§Ø­Ø¯ Ù…Ù‚ØµØ¯</th><th>Ù¾Ø±Ø³Ù†Ù„</th></tr></thead>
      <tbody>
        {% for entry in stockouts %}
        <tr>
          <td>{{ entry.stock_out.date|date:"Y-m-d" }}</td>
          <td>{{ entry.quantity }}</td>
          <td>{{ entry.stock_out.department }}</td>
          <td>{{ entry.stock_out.staff }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="4" class="text-center text-muted">Ø®Ø±ÙˆØ¬ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}

{% block extra_css %}
<style>
  @media print {
    body {
      background: white !important;
      color: black !important;
    }

    .card, .table {
      box-shadow: none !important;
      border: 1px solid #ccc !important;
    }

    .btn, nav, footer, .d-print-none {
      display: none !important;
    }

    .card {
      margin-bottom: 1rem !important;
    }
  }
</style>
{% endblock %}